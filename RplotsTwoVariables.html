<!DOCTYPE html>
<html lang="en-US"  prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Sadanand Singh" />
        <meta name="copyright" content="Sadanand Singh" />

<meta name="keywords" content="Data, R, R, Data Science, Statistics, " />
        <title>Pseudo Facebook Data - Exploring Two&nbsp;Variables  · Sadanand's Notes
</title>
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
        <link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://sadanand-singh.github.io/theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://sadanand-singh.github.io/theme/css/github.css" media="screen">
        <link rel="shortcut icon" href="http://sadanand-singh.github.io/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="http://sadanand-singh.github.io/theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="http://sadanand-singh.github.io/theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="http://sadanand-singh.github.io/theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="http://sadanand-singh.github.io/theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="http://sadanand-singh.github.io/theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="http://sadanand-singh.github.io/theme/images/apple-touch-icon-144x144.png" />

            <meta property="fb:app_id" content="993596464012237"/>
        <meta property="og:site_name" content="Sadanand's Notes" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Pseudo Facebook Data - Exploring Two Variables"/>
        <meta property="og:url" content="http://sadanand-singh.github.io/RplotsTwoVariables"/>
        <meta property="og:description" content="Exploring two variables in R Using Facebook Data"/>
        <meta property="article:published_time" content="2015-12-13" />
            <meta property="article:section" content="R, Data Science, Statistics" />
            <meta property="article:tag" content="Data" />
            <meta property="article:tag" content="R" />
            <meta property="article:author" content="Sadanand Singh" />
            <meta property="og:image"
                  content="http://sadanand-singh.github.io//theme/images/apple-touch-icon-152x152.png"/>

            <meta name="twitter:card" content="summary">
                <meta name="twitter:site" content="@sadanandsingh">
                <meta name="twitter:creator" content="@sadanandsingh">
            <meta name="twitter:domain" content="http://sadanand-singh.github.io">
                    <meta property="twitter:image"
                          content="http://sadanand-singh.github.io//theme/images/apple-touch-icon-152x152.png"/>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-54080172-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    </head>
    <body>
        <script>
            window.fbAsyncInit = function() {
                FB.init({
                  appId      : "993596464012237",
                  xfbml      : true,
                  version    : 'v2.5'
                });
              };

            (function(d, s, id){
             var js, fjs = d.getElementsByTagName(s)[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement(s); js.id = id;
             js.src = "//connect.facebook.net/en_US/sdk.js";
             fjs.parentNode.insertBefore(js, fjs);
           }(document, 'script', 'facebook-jssdk'));
        </script>

        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="http://sadanand-singh.github.io/"><span class=site-name>Sadanand's Notes</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://sadanand-singh.github.io">Home</a></li>
                            <li ><a href="http://sadanand-singh.github.io/categories.html">Categories</a></li>
                            <li ><a href="http://sadanand-singh.github.io/tags.html">Tags</a></li>
                            <li ><a href="http://sadanand-singh.github.io/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://sadanand-singh.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="http://sadanand-singh.github.io/RplotsTwoVariables"> Pseudo Facebook Data - Exploring Two&nbsp;Variables  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

<a href="https://twitter.com/share"
  class="twitter-share-button"
  data-via="sadanandsingh"
  data-related="sadanandsingh">Tweet</a>
  <script>
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
  </script>

<div class="fb-like"
  data-href="http://sadanand-singh.github.io/RplotsTwoVariables"
  data-layout="standard"
  data-action="like"
  data-show-faces="false"
  data-share="true">
</div>
            <p>In this section, we will be re-using the data from the previous post based on Pseudo Facebook data from <a href="https://www.udacity.com/">udacity</a>.</p>
<p>The data from the project corresponds to a typical data set at <a href="http://facebook.com">Facebook</a>. You can load the data through the following command. Notice that this is a <TAB> delimited csv file. This data set consists of 99000 rows of data. We will see the details of different columns using the command&nbsp;below.</p>
<div class="highlight"><pre>pf <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;https://s3.amazonaws.com/udacity-hosted-downloads/ud651/pseudo_facebook.tsv&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&#39;\t&#39;</span><span class="p">)</span>
str<span class="p">(</span>pf<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## &#39;data.frame&#39;:    99003 obs. of  15 variables:
##  $ userid               : int  2094382 1192601 2083884 1203168 1733186 1524765 1136133 1680361 1365174 1712567 ...
##  $ age                  : int  14 14 14 14 14 14 13 13 13 13 ...
##  $ dob_day              : int  19 2 16 25 4 1 14 4 1 2 ...
##  $ dob_year             : int  1999 1999 1999 1999 1999 1999 2000 2000 2000 2000 ...
##  $ dob_month            : int  11 11 11 12 12 12 1 1 1 2 ...
##  $ gender               : Factor w/ 2 levels &quot;female&quot;,&quot;male&quot;: 2 1 2 1 2 2 2 1 2 2 ...
##  $ tenure               : int  266 6 13 93 82 15 12 0 81 171 ...
##  $ friend_count         : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ friendships_initiated: int  0 0 0 0 0 0 0 0 0 0 ...
##  $ likes                : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ likes_received       : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ mobile_likes         : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ mobile_likes_received: int  0 0 0 0 0 0 0 0 0 0 ...
##  $ www_likes            : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ www_likes_received   : int  0 0 0 0 0 0 0 0 0 0 ...
</pre></div>


<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
</pre></div>


<p>Usually, it is best to use a scatter plot to analyze two&nbsp;variables:</p>
<div class="highlight"><pre><span class="kp">summary</span><span class="p">(</span>pf<span class="o">$</span>age<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   13.00   20.00   28.00   37.28   50.00  113.00
</pre></div>


<div class="highlight"><pre>ggplot<span class="p">(</span>data <span class="o">=</span> pf<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> age<span class="p">,</span> y <span class="o">=</span> friend_count<span class="p">))</span> <span class="o">+</span>
  geom_point<span class="p">()</span> <span class="o">+</span>
  xlim<span class="p">(</span><span class="m">13</span><span class="p">,</span> <span class="m">90</span><span class="p">)</span>
</pre></div>


<p><img alt="plot of chunk unnamed-chunk-2" src="http://sadanand-singh.github.io/images/R/fbTwoVar_unnamed-chunk-2-1.png" /> </p>
<p>We can notice some really interesting behavior in the ugly scatter plot above:
1. The age data is binned, as expected (only integers allowed)
2. Young people around the age of 20 have maximum friend count.
3. There is unusual spike in friends count of people aged more than 100. This could mostly be some flaw in the data, probably based on incorrect entry by the users.
4. People around the age of 70 too have quite a large amount of friends. This is pretty interesting and could point to the use of the social media site by an unexpected group of&nbsp;people.</p>
<p>We can use summary command to find the bounds on age and then use that to limit age&nbsp;axis.</p>
<p>Furthermore, we notice at some areas of the plot being too dense, where as some to be really sparse. The areas where points are too dense is called &#8220;over plotting&#8221; - It is impossible to extract any meaningful statistics from this region. In order to overcome this, we can set the transparency of the plots using the alpha parameter in the geo_point(). Using a value of 1/20 means, one point that will plotted will be equal to 20 original&nbsp;points.</p>
<p>Given age is a discrete variable we can add some noise to this using geom_jitter to get a better feel about its&nbsp;distribution.</p>
<div class="highlight"><pre>ggplot<span class="p">(</span>data <span class="o">=</span> pf<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> age<span class="p">,</span> y <span class="o">=</span> friend_count<span class="p">))</span> <span class="o">+</span>
  geom_jitter<span class="p">(</span>alpha <span class="o">=</span> <span class="m">1</span><span class="o">/</span><span class="m">20</span><span class="p">,</span> colour <span class="o">=</span> <span class="s">&quot;red&quot;</span><span class="p">)</span> <span class="o">+</span>
  xlim<span class="p">(</span><span class="m">13</span><span class="p">,</span> <span class="m">90</span><span class="p">)</span>
</pre></div>


<p><img alt="plot of chunk unnamed-chunk-3" src="http://sadanand-singh.github.io/images/R/fbTwoVar_unnamed-chunk-3-1.png" /> </p>
<p>Based on these new plots, we can find bulk to higher friend count for younger people is still less than 600. We still find higher count for age group of&nbsp;70.</p>
<p>We do a better representation of data using the coord_trans() method. We will be using a square root&nbsp;function.</p>
<div class="highlight"><pre>ggplot<span class="p">(</span>data <span class="o">=</span> pf<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> age<span class="p">,</span> y <span class="o">=</span> friend_count<span class="p">))</span> <span class="o">+</span>
  geom_jitter<span class="p">(</span>alpha <span class="o">=</span> <span class="m">1</span><span class="o">/</span><span class="m">20</span><span class="p">,</span> colour <span class="o">=</span> <span class="s">&quot;cyan&quot;</span><span class="p">,</span> position <span class="o">=</span> position_jitter<span class="p">(</span>h <span class="o">=</span> <span class="m">0</span><span class="p">))</span> <span class="o">+</span>
  xlim<span class="p">(</span><span class="m">13</span><span class="p">,</span> <span class="m">90</span><span class="p">)</span> <span class="o">+</span>
  coord_trans<span class="p">(</span>y <span class="o">=</span> <span class="s">&quot;sqrt&quot;</span> <span class="p">)</span>
</pre></div>


<p><img alt="plot of chunk unnamed-chunk-4" src="http://sadanand-singh.github.io/images/R/fbTwoVar_unnamed-chunk-4-1.png" /> </p>
<p>On a similar way, we can look at relationship between friends initiated and&nbsp;age.</p>
<div class="highlight"><pre>ggplot<span class="p">(</span>data <span class="o">=</span> pf<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> age<span class="p">,</span> y <span class="o">=</span> friendships_initiated<span class="p">))</span> <span class="o">+</span>
  geom_jitter<span class="p">(</span>alpha <span class="o">=</span> <span class="m">1</span><span class="o">/</span><span class="m">10</span><span class="p">,</span> colour <span class="o">=</span> <span class="s">&quot;#ff33cc&quot;</span><span class="p">,</span> position <span class="o">=</span> position_jitter<span class="p">(</span>h <span class="o">=</span> <span class="m">0</span><span class="p">))</span> <span class="o">+</span>
  xlim<span class="p">(</span><span class="m">13</span><span class="p">,</span> <span class="m">90</span><span class="p">)</span> <span class="o">+</span>
  coord_trans<span class="p">(</span>y <span class="o">=</span> <span class="s">&quot;sqrt&quot;</span> <span class="p">)</span>
</pre></div>


<p><img alt="plot of chunk unnamed-chunk-5" src="http://sadanand-singh.github.io/images/R/fbTwoVar_unnamed-chunk-5-1.png" /> </p>
<p>Interestingly, we find this distribution to be very similar to the one for friend&nbsp;count.</p>
<p>Scatter plots try to keep us very close to the data. It represents each and evry data point. However, in order to judge the quality of a data, it is important to know its important statisics like mean, median etc. How does average of a variable wrt to the other&nbsp;variable.</p>
<p>We want to say, study how does average friend count vary with age. In order to study this we will use a package called&nbsp;&#8216;dplyr&#8217;.</p>
<p>First we want to group our data frame by age. Then, we can create a new data frame that lists friend count mean, median and frequency (n) by using the summarise() method. We can look a first few data of this new data frame using the head() method.
We notice that by default, data may not be arranged by order of age. We can do that by explicitly calling the arrange()&nbsp;method.</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
age_groups <span class="o">&lt;-</span> group_by<span class="p">(</span>pf<span class="p">,</span> age<span class="p">)</span>
pf.fc_by_age <span class="o">&lt;-</span> summarise<span class="p">(</span>age_groups<span class="p">,</span>
          friend_count_mean <span class="o">=</span> <span class="kp">mean</span><span class="p">(</span>friend_count<span class="p">),</span>
          friend_count_median <span class="o">=</span> median<span class="p">(</span>friend_count<span class="p">),</span>
          n <span class="o">=</span> n<span class="p">())</span>
pf.fc_by_age <span class="o">&lt;-</span> arrange<span class="p">(</span>pf.fc_by_age<span class="p">,</span> age<span class="p">)</span>
<span class="kp">head</span><span class="p">(</span>pf.fc_by_age<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Source: local data frame [6 x 4]
## 
##     age friend_count_mean friend_count_median     n
##   (int)             (dbl)               (dbl) (int)
## 1    13          164.7500                74.0   484
## 2    14          251.3901               132.0  1925
## 3    15          347.6921               161.0  2618
## 4    16          351.9371               171.5  3086
## 5    17          350.3006               156.0  3283
## 6    18          331.1663               162.0  5196
</pre></div>


<p>If you notice one detail about all dplyr method, every method needs one data frame and output needs to be saved to be used by next set of methods. All this can be done as a chain of commands using the following&nbsp;syntax:</p>
<div class="highlight"><pre>pf.fc_by_age <span class="o">&lt;-</span> pf <span class="o">%&gt;%</span>
  group_by<span class="p">(</span>age<span class="p">)</span> <span class="o">%&gt;%</span>
  summarise<span class="p">(</span>friend_count_mean <span class="o">=</span> <span class="kp">mean</span><span class="p">(</span>friend_count<span class="p">),</span>
          friend_count_median <span class="o">=</span> median<span class="p">(</span>friend_count<span class="p">),</span>
          n <span class="o">=</span> n<span class="p">())</span> <span class="o">%&gt;%</span>
  arrange<span class="p">(</span>age<span class="p">)</span>
<span class="kp">head</span><span class="p">(</span>pf.fc_by_age<span class="p">,</span><span class="m">20</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Source: local data frame [20 x 4]
## 
##      age friend_count_mean friend_count_median     n
##    (int)             (dbl)               (dbl) (int)
## 1     13          164.7500                74.0   484
## 2     14          251.3901               132.0  1925
## 3     15          347.6921               161.0  2618
## 4     16          351.9371               171.5  3086
## 5     17          350.3006               156.0  3283
## 6     18          331.1663               162.0  5196
## 7     19          333.6921               157.0  4391
## 8     20          283.4991               135.0  3769
## 9     21          235.9412               121.0  3671
## 10    22          211.3948               106.0  3032
## 11    23          202.8426                93.0  4404
## 12    24          185.7121                92.0  2827
## 13    25          131.0211                62.0  3641
## 14    26          144.0082                75.0  2815
## 15    27          134.1473                72.0  2240
## 16    28          125.8354                66.0  2364
## 17    29          120.8182                66.0  1936
## 18    30          115.2080                67.5  1716
## 19    31          118.4599                63.0  1694
## 20    32          114.2800                63.0  1443
</pre></div>


<p>Now, let us look at this new data frame visually. We can first look at the relationship between average friend count and&nbsp;age.</p>
<div class="highlight"><pre>ggplot<span class="p">(</span>data <span class="o">=</span> pf.fc_by_age<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> age<span class="p">,</span> y <span class="o">=</span> friend_count_mean<span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">()</span>
</pre></div>


<p><img alt="plot of chunk unnamed-chunk-8" src="http://sadanand-singh.github.io/images/R/fbTwoVar_unnamed-chunk-8-1.png" /> </p>
<p>We can use this plot as good summary of the original scatter plot and put the two on top of each other. We can also transform the y axis using the coors_cartesian()&nbsp;method.</p>
<div class="highlight"><pre>ggplot<span class="p">(</span>data <span class="o">=</span> pf<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> age<span class="p">,</span> y <span class="o">=</span> friend_count<span class="p">))</span> <span class="o">+</span>
  geom_point<span class="p">(</span>alpha <span class="o">=</span> <span class="m">1</span><span class="o">/</span><span class="m">20</span><span class="p">,</span> colour <span class="o">=</span> <span class="s">&quot;#00bfff&quot;</span><span class="p">,</span>
              position <span class="o">=</span> position_jitter<span class="p">(</span>h <span class="o">=</span> <span class="m">0</span><span class="p">))</span> <span class="o">+</span>
  coord_cartesian<span class="p">(</span>xlim <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">13</span><span class="p">,</span><span class="m">70</span><span class="p">),</span> ylim <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1000</span><span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">(</span>stat <span class="o">=</span> <span class="s">&#39;summary&#39;</span><span class="p">,</span> fun.y <span class="o">=</span> <span class="kp">mean</span><span class="p">)</span> <span class="o">+</span>
  geom_line<span class="p">(</span>stat <span class="o">=</span> <span class="s">&#39;summary&#39;</span><span class="p">,</span> fun.y <span class="o">=</span> quantile<span class="p">,</span> probs <span class="o">=</span> <span class="m">0.1</span><span class="p">,</span>
            linetype <span class="o">=</span> <span class="m">2</span><span class="p">,</span> color <span class="o">=</span> <span class="s">&quot;blue&quot;</span><span class="p">)</span> <span class="o">+</span>
  geom_line<span class="p">(</span>stat <span class="o">=</span> <span class="s">&#39;summary&#39;</span><span class="p">,</span> fun.y <span class="o">=</span> quantile<span class="p">,</span> probs <span class="o">=</span> <span class="m">0.5</span><span class="p">,</span>
            linetype <span class="o">=</span> <span class="m">1</span><span class="p">,</span> color <span class="o">=</span> <span class="s">&quot;blue&quot;</span><span class="p">)</span> <span class="o">+</span>
  geom_line<span class="p">(</span>stat <span class="o">=</span> <span class="s">&#39;summary&#39;</span><span class="p">,</span> fun.y <span class="o">=</span> quantile<span class="p">,</span> probs <span class="o">=</span> <span class="m">0.9</span><span class="p">,</span>
            linetype <span class="o">=</span> <span class="m">2</span><span class="p">,</span> color <span class="o">=</span> <span class="s">&quot;#ff9900&quot;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error: Unknown parameters: probs
</pre></div>


<p>In the above plot, we can see that between the age group 30-69, 90% of population has less than 250&nbsp;freinds.</p>
<p>In stead of using 4 different summary measures to analyze the above data, we can use a single&nbsp;number!</p>
<p>Often analysts will use correlation coefficients to summarize this. We will use the Pearson product moment correlation (r).
You can look at the cor.test() method for details. This measures a linear correlation between two&nbsp;variables.</p>
<div class="highlight"><pre><span class="kp">with</span><span class="p">(</span><span class="kp">subset</span><span class="p">(</span>pf<span class="p">,</span> age <span class="o">&lt;</span> <span class="m">70</span> <span class="o">&amp;</span> age <span class="o">&gt;=</span> <span class="m">13</span><span class="p">),</span> cor.test<span class="p">(</span>age<span class="p">,</span> friend_count<span class="p">,</span> method <span class="o">=</span> <span class="s">&quot;pearson&quot;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  age and friend_count
## t = -52.326, df = 90664, p-value &lt; 2.2e-16
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  -0.1775257 -0.1648889
## sample estimates:
##        cor 
## -0.1712144
</pre></div>


<p>We can also have other measures of relationship. For example, a measure of monotonic relationship would be done using spearman coefficient. Similarly, a measure of strength of dependence between two variables can be done using the &#8220;Kendall Rank Coefficient&#8221;. A more detailed description about these can be found at <a href="http://www.statisticssolutions.com/correlation-pearson-kendall-spearman/">http://www.statisticssolutions.com/correlation-pearson-kendall-spearman/</a>.</p>
<p>We will now look at variables that are strictly correlated using&nbsp;scatterplots.</p>
<p>One such example in our datset would be a relationship between likes_received (y) vs. www_likes_received&nbsp;(x).</p>
<div class="highlight"><pre>ggplot<span class="p">(</span>data <span class="o">=</span> pf<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> www_likes_received<span class="p">,</span>
                      y <span class="o">=</span> likes_received<span class="p">))</span> <span class="o">+</span>
  geom_point<span class="p">(</span>alpha <span class="o">=</span> <span class="m">1</span><span class="p">,</span> colour <span class="o">=</span> <span class="s">&quot;#996633&quot;</span><span class="p">)</span> <span class="o">+</span>
  xlim<span class="p">(</span><span class="m">0</span><span class="p">,</span> quantile<span class="p">(</span>pf<span class="o">$</span>www_likes_received<span class="p">,</span> <span class="m">0.95</span><span class="p">))</span><span class="o">+</span>
  ylim<span class="p">(</span><span class="m">0</span><span class="p">,</span> quantile<span class="p">(</span>pf<span class="o">$</span>likes_received<span class="p">,</span> <span class="m">0.95</span><span class="p">))</span><span class="o">+</span>
  geom_smooth<span class="p">(</span>method <span class="o">=</span> <span class="s">&quot;lm&quot;</span><span class="p">,</span> color <span class="o">=</span> <span class="s">&quot;green&quot;</span><span class="p">)</span>
</pre></div>


<p><img alt="plot of chunk unnamed-chunk-11" src="http://sadanand-singh.github.io/images/R/fbTwoVar_unnamed-chunk-11-1.png" /> </p>
<p>We have used quantile() method to find upper limits of x and y data. Additionally, we added a correlation line using the geom_smooth()&nbsp;function.</p>
<p>We can find the numerical value of the correlation between these two&nbsp;variables.</p>
<div class="highlight"><pre><span class="kp">with</span><span class="p">(</span>pf<span class="p">,</span> cor.test<span class="p">(</span>www_likes_received<span class="p">,</span> likes_received<span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  www_likes_received and likes_received
## t = 937.1, df = 99001, p-value &lt; 2.2e-16
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.9473553 0.9486176
## sample estimates:
##       cor 
## 0.9479902
</pre></div>


<p>Correlation between two variables might not be a good thing always. For example in the above case, it was simply due to the artifact of the two data sets were highly coupled, one was a super set of the&nbsp;other.</p>
<p>We can look at the caution with which correlations should be used in more detail using the &#8220;Mitchell&#8221; data set from the alr3 package. We can look at more details of Mitchell data set using its help method. This data set lists Data collected by Kenneth G. Hubbard on soil temperature at 20 cm depth in Mitchell, Nebraska for 17 years (1976-1992)&nbsp;.</p>
<div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>alr3<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in library(alr3): there is no package called &#39;alr3&#39;
</pre></div>


<div class="highlight"><pre>data<span class="p">(</span>Mitchell<span class="p">)</span>
str<span class="p">(</span>Mitchell<span class="p">)</span>
</pre></div>


<div class="highlight"><pre>## Error in str(Mitchell): object &#39;Mitchell&#39; not found
</pre></div>


<p>Let use first look at a scatter plot between temperature and&nbsp;month.</p>
<div class="highlight"><pre>ggplot<span class="p">(</span>data <span class="o">=</span> Mitchell<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> Month<span class="p">,</span> y <span class="o">=</span> Temp<span class="p">))</span> <span class="o">+</span>
  geom_point<span class="p">()</span> <span class="o">+</span>
  scale_x_discrete<span class="p">(</span>breaks <span class="o">=</span> <span class="kp">seq</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">203</span><span class="p">,</span> <span class="m">12</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre>## Error in ggplot(data = Mitchell, aes(x = Month, y = Temp)): object &#39;Mitchell&#39; not found
</pre></div>


<p>One direct observation we can make is in terms of cyclic nature of the data, Temp. is fluctuating every 12 months. This tells us the importance scales when we are looking at Data set. Clearly, a direct use of cor.test() would give us a un-physical correlation&nbsp;coeffieicnt!</p>
<p>Now, we will return back to out pseudo Facebook data. Let us take a look again at the modified data frame created using the dplyr methods. We want to remove any noise in the average&nbsp;values.</p>
<p>Firse, we want to create a new data frame where age is measured in fractions of months. Then we can plot two means&nbsp;together.</p>
<p>By splitting age into finer bins of months, we have made the age means data noisier. In a similar way, we could smooth the data further, if we measure age in multiples of&nbsp;5!</p>
<div class="highlight"><pre>pf<span class="o">$</span>age_with_month <span class="o">&lt;-</span> pf<span class="o">$</span>age <span class="o">+</span> <span class="p">(</span><span class="m">12</span><span class="o">-</span>pf<span class="o">$</span>dob_month<span class="p">)</span><span class="o">/</span><span class="m">12</span>
pf.fc_by_age_month <span class="o">&lt;-</span> pf <span class="o">%&gt;%</span>
  group_by<span class="p">(</span>age_with_month<span class="p">)</span> <span class="o">%&gt;%</span>
  summarise<span class="p">(</span>friend_count_mean <span class="o">=</span> <span class="kp">mean</span><span class="p">(</span>friend_count<span class="p">),</span>
          friend_count_median <span class="o">=</span> median<span class="p">(</span>friend_count<span class="p">),</span>
          n <span class="o">=</span> n<span class="p">())</span> <span class="o">%&gt;%</span>
  arrange<span class="p">(</span>age_with_month<span class="p">)</span>
p1<span class="o">&lt;-</span> ggplot<span class="p">(</span>data <span class="o">=</span> <span class="kp">subset</span><span class="p">(</span>pf.fc_by_age<span class="p">,</span> age <span class="o">&lt;</span> <span class="m">71</span><span class="p">),</span>
            aes<span class="p">(</span>x <span class="o">=</span> age<span class="p">,</span> y <span class="o">=</span> friend_count_mean<span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">()</span>
p2 <span class="o">&lt;-</span> ggplot<span class="p">(</span> data <span class="o">=</span> <span class="kp">subset</span><span class="p">(</span>pf.fc_by_age_month<span class="p">,</span>
                      age_with_month <span class="o">&lt;</span> <span class="m">71</span><span class="p">),</span>
        aes<span class="p">(</span>x <span class="o">=</span> age_with_month<span class="p">,</span> y <span class="o">=</span> friend_count_mean<span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">()</span>
p3<span class="o">&lt;-</span> ggplot<span class="p">(</span>data <span class="o">=</span> <span class="kp">subset</span><span class="p">(</span>pf.fc_by_age<span class="p">,</span> age <span class="o">&lt;</span> <span class="m">71</span><span class="p">),</span>
            aes<span class="p">(</span>x <span class="o">=</span> <span class="kp">round</span><span class="p">(</span>age<span class="o">/</span><span class="m">5</span><span class="p">)</span><span class="o">*</span><span class="m">5</span><span class="p">,</span> y <span class="o">=</span> friend_count_mean<span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">()</span>
<span class="kn">library</span><span class="p">(</span>gridExtra<span class="p">)</span>
grid.arrange<span class="p">(</span>p2<span class="p">,</span> p1<span class="p">,</span> p3<span class="p">,</span> ncol <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
</pre></div>


<p><img alt="plot of chunk unnamed-chunk-15" src="http://sadanand-singh.github.io/images/R/fbTwoVar_unnamed-chunk-15-1.png" /> </p>
<p>This is an example of bias variance tradeoff, and is similar to the tradeoff we make when choosing the bin width in histograms. One way, we can do this quite easily in ggplot is using the geom_smooth() function to fit a flexible statistical&nbsp;model.</p>
<div class="highlight"><pre>p1<span class="o">&lt;-</span> ggplot<span class="p">(</span>data <span class="o">=</span> <span class="kp">subset</span><span class="p">(</span>pf.fc_by_age<span class="p">,</span> age <span class="o">&lt;</span> <span class="m">71</span><span class="p">),</span>
            aes<span class="p">(</span>x <span class="o">=</span> age<span class="p">,</span> y <span class="o">=</span> friend_count_mean<span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">()</span> <span class="o">+</span>
  geom_smooth<span class="p">()</span>
p2 <span class="o">&lt;-</span> ggplot<span class="p">(</span> data <span class="o">=</span> <span class="kp">subset</span><span class="p">(</span>pf.fc_by_age_month<span class="p">,</span>
                      age_with_month <span class="o">&lt;</span> <span class="m">71</span><span class="p">),</span>
        aes<span class="p">(</span>x <span class="o">=</span> age_with_month<span class="p">,</span> y <span class="o">=</span> friend_count_mean<span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">()</span> <span class="o">+</span>
  geom_smooth<span class="p">()</span>

grid.arrange<span class="p">(</span>p2<span class="p">,</span> p1<span class="p">,</span> ncol <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
</pre></div>


<p><img alt="plot of chunk unnamed-chunk-16" src="http://sadanand-singh.github.io/images/R/fbTwoVar_unnamed-chunk-16-1.png" /> </p>
<p>By default, geom_smooth() uses <a href="https://en.wikipedia.org/wiki/Local_regression">Loess and Lowess</a> method for smoothing. Here, the model is based on the idea that data is continuous and&nbsp;smooth.</p>
<p>So, through this blog, we have noticed several ways to plot the same data. The obvious that arises is which plot to choose? In <span class="caps">EDA</span>, however, answer to this is, simply you should choose. The idea in <span class="caps">EDA</span> is that the same data when plotted differently, glean different&nbsp;incites.</p>

<a href="https://twitter.com/share"
  class="twitter-share-button"
  data-via="sadanandsingh"
  data-related="sadanandsingh">Tweet</a>
  <script>
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
  </script>

<div class="fb-like"
  data-href="http://sadanand-singh.github.io/RplotsTwoVariables"
  data-layout="standard"
  data-action="like"
  data-show-faces="false"
  data-share="true">
</div>
<section>
<p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Leave your comments below. </p>
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle disqus-comment-count" data-toggle="collapse" data-parent="#accordion2"
                    data-disqus-identifier="RplotsTwoVariables.sadanand"
                href="http://sadanand-singh.github.io/RplotsTwoVariables#disqus_thread">
                Comments
            </a>
        </div>
        <div id="disqus_thread" class="accordion-body collapse">
            <div class="accordion-inner">
                <div class="comments">
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'sadanandsblog';
        var disqus_identifier = 'RplotsTwoVariables.sadanand';
    var disqus_url = 'http://sadanand-singh.github.io/RplotsTwoVariables';

    (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>                </div>
            </div>
        </div>
    </div>
</div>
</section>

            <aside>
            <hr/>
            <nav>
            <ul class="articles_timeline">
                <li class="previous_article">« <a href="http://sadanand-singh.github.io/RplotsFacebbok" title="Previous: Pseudo Facebook Data - Plots in&nbsp;R">Pseudo Facebook Data - Plots in&nbsp;R</a></li>
                <li class="next_article"><a href="http://sadanand-singh.github.io/RplotsMultiVariables" title="Next: Pseudo Facebook Data - Exploring Many&nbsp;Variables">Pseudo Facebook Data - Exploring Many&nbsp;Variables</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2015-12-13T12:05:00-08:00">Dec 13, 2015</time>
            <h4>Last Updated</h4>
            <div class="last_updated">2015-12-13 13:45:00-08:00</div>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#R,-Data-Science,-Statistics-ref">R, Data Science, Statistics</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#Data-ref">Data
                    <span>4</span>
</a></li>
                <li><a href="/tags.html#R-ref">R
                    <span>4</span>
</a></li>
            </ul>

<h4>Stay in Touch</h4>
<a href="https://twitter.com/sadanandsingh"
class="twitter-follow-button"
data-show-count="false" data-size="large">Follow @sadanandsingh </a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    <a href="http://twitter.com/sadanandsingh" title="My Twitter Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-twitter sidebar-social-links"></i></a>
    <a href="https://www.facebook.com/sadanand4singh" title="My Facebook Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-facebook sidebar-social-links"></i></a>
    <a href="http://github.com/sadanand-singh" title="My Github Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="https://www.linkedin.com/in/sadanandsingh" title="My Linkedin Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-linkedin sidebar-social-links"></i></a>

        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-license"><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"> "Sadanand's Notes" </span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://sadanand-singh.github.io" property="cc:attributionName" rel="cc:attributionURL">Sadanand Singh</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</li>
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

<script type="text/javascript">
    var disqus_shortname = 'sadanandsblog';

    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
        <script  language="javascript" type="text/javascript">
            function uncollapse() {
                var hash_str = window.location.hash;
                if (window.location.hash.match(/^#comment-\d+$/))
                {
                    var hash_str = '#disqus_thread';
                }
                $(hash_str).collapse({
                    toggle: true
                    })
            }
        </script>

        <script type="text/javascript" language="JavaScript">
            uncollapse();
        </script>
    </body>
</html>