

  
    
  


<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.39">
    <meta name="theme" content="Bootstrap3-Lumen">
    
      <title>Switching to Hugo from Nikola | Sadanand&#39;s Notes</title>
    
    <meta name="author" content="Sadanand Singh">
    <meta name="keywords" content="">

    
        <link rel="icon" href="https://sadanand-singh.github.io/favicon.ico" sizes="16x16">
    
        <link rel="icon" href="https://sadanand-singh.github.io/favicon-32x32.png" sizes="32x32">
    
        <link rel="icon" href="https://sadanand-singh.github.io/favicon-96x96.png" sizes="96x96">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon.png" sizes="192x192">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-precomposed.png" sizes="192x192">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-57x57.png" sizes="57x57">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-60x60.png" sizes="60x60">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-72x72.png" sizes="72x72">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-76x76.png" sizes="76x76">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-114x114.png" sizes="114x114">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-120x120.png" sizes="120x120">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-144x144.png" sizes="144x144">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-152x152.png" sizes="152x152">
    
        <link rel="icon" href="https://sadanand-singh.github.io/apple-icon-180x180.png" sizes="180x180">
    

    
    <meta name="description" content="I have been using Nikola to build this Blog. Its a great static site
build system that is based on Python. However, It has some crazy
amount of dependencies (to have reasonable looking site). It
uses restructured text (rst) as the primary language for
content creation. Personally, I use markdown for almost every thing
else - taking notes, making diary, code documentation etc.
Furthermore, given Nikola tries to support almost everything in a
static site builder, lately its is becoming more and more bloated.

">
    <meta property="og:description" content="I have been using Nikola to build this Blog. Its a great static site
build system that is based on Python. However, It has some crazy
amount of dependencies (to have reasonable looking site). It
uses restructured text (rst) as the primary language for
content creation. Personally, I use markdown for almost every thing
else - taking notes, making diary, code documentation etc.
Furthermore, given Nikola tries to support almost everything in a
static site builder, lately its is becoming more and more bloated.

">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Switching to Hugo from Nikola">
    <meta property="og:url" content="/posts/nikola2hugo/">
    <meta property="og:site_name" content="Sadanand&#39;s Notes">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Sadanand&#39;s Notes">
    <meta name="twitter:description" content="I have been using Nikola to build this Blog. Its a great static site
build system that is based on Python. However, It has some crazy
amount of dependencies (to have reasonable looking site). It
uses restructured text (rst) as the primary language for
content creation. Personally, I use markdown for almost every thing
else - taking notes, making diary, code documentation etc.
Furthermore, given Nikola tries to support almost everything in a
static site builder, lately its is becoming more and more bloated.

">
    
      <meta name="twitter:creator" content="@sadanandsingh">
    
    
      <meta property="fb:app_id" content="993596464012237">
    

    
      <meta property="og:image" content="https://sadanand-singh.github.io/apple-icon-76x76.png">
    

    

    <link href="//stackpath.bootstrapcdn.com/bootswatch/4.1.0/litera/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
   <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" />
    <link href="https://sadanand-singh.github.io/css/rst.css" rel="stylesheet" type="text/css">
    <link href="https://sadanand-singh.github.io/css/theme.css" rel="stylesheet" type="text/css">
    <link href="https://sadanand-singh.github.io/css/peak.min.css" rel="stylesheet" type="text/css">
    <link href="https://sadanand-singh.github.io/css/colorbox.css" rel="stylesheet" type="text/css">
    <link href="https://sadanand-singh.github.io/css/custom.min.css" rel="stylesheet" type="text/css">
    <link href="https://sadanand-singh.github.io/css/tags.min.css" rel="stylesheet" type="text/css">
    <link href="//cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch.css" rel="stylesheet" type="text/css">

    

    
    
    
  </head>

<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="https://sadanand-singh.github.io/">
        
            <img class="px-2" src="https://sadanand-singh.github.io/letter-s.png" alt="Sadanand&#39;s Notes" id="logo">
        

        
            Sadanand&#39;s Notes
        
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        </button>
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="navbar-nav mr-auto">
              
              
              
                
                
                  <li class="nav-item px-3"><a class="nav-link" href="/post/">Blog</a>
                
              
                
                
                  <li class="nav-item px-3"><a class="nav-link" href="/tags/">Tags</a>
                
              
                
                
                  <li class="nav-item px-3"><a class="nav-link" href="/categories/">Categories</a>
                
              
                
                
                  <li class="nav-item px-3"><a class="nav-link" href="/archives/">Archive</a>
                
              
            </ul>
            <span class="navbar-form navbar-right">
                <input type="text" id="tipue_search_input" class="form-control" placeholder="Search">
            </span>
        </div>
    </div>
</nav>

<div class="container" id="content" role="main">
    <div class="body-content">
        
        <div class="row">
            <article class=" mw-100 post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
    <header>
    
      <h1 class="p-name entry-title" itemprop="headline name">
        Switching to Hugo from Nikola
      </h1>
    
    <div class="metadata">
    
  
  
    
    <p class="byline author vcard"><span class="byline-name fn"> By
    <a href="/authors/sadanand-singh">Sadanand Singh</a>
    </span></p>
    
  


    
    
        <p class="dateline">on
            <a href="https://sadanand-singh.github.io/posts/nikola2hugo/" rel="bookmark">
              <time itemprop="datePublished" datetime="2017-06-23T17:53:58-07:00">
                
  
  
  
  
    2017-06-23
  

              </time>
            </a>
        </p>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="/categories/blog">Blog</a>
    
  


    
        
            
            <p class="commentline">
                <a href="https://sadanand-singh.github.io/posts/nikola2hugo/#disqus_thread" data-disqus-identifier="nikola2hugo.sadanand">
                Comments
                </a>
            </p>
            
        
    

    &nbsp;
<div class="fb-like" data-send="true" data-layout="standard" data-action="like" data-size="small" data-show-faces="false" data-share="false"></div>
    </div>
</header>
    <div class="mw-100 e-content entry-content" itemprop="articleBody text">
        <p>I have been using <a href="https://getnikola.com">Nikola</a> to build this Blog. Its a great static site
build system that is based on Python. However, It has some crazy
amount of dependencies (to have reasonable looking site). It
uses <a href="http://docutils.sourceforge.net/rst.html">restructured text (rst)</a> as the primary language for
content creation. Personally, I use markdown for almost every thing
else - taking notes, making diary, code documentation etc.
Furthermore, given Nikola tries to support almost everything in a
static site builder, lately its is becoming more and more bloated.</p>

<p></p>

<p>Case in  point, recently it got support for <a href="https://getnikola.com/handbook.html#shortcodes">shortcodes</a> and although that did
enable me to write posts in Markdown, but it is so difficult to
develop them (It does not help to have almost no documentation/guide
for their development). They are heavily tied to the <a href="https://plugins.getnikola.com">plugin</a> system
with light support for template based shortcodes.</p>

<p>I really have nothing against <a href="https://getnikola.com">Nikola</a>. However, I did not feel at home - I wanted a light system that focused on markdown and had all the flexibilities that I wanted. My research soon brought me to <a href="https://gohugo.io">Hugo</a>.</p>

<strong id="table-of-contents">Table of Contents</strong><nav id="TableOfContents">
<ul>
<li><a href="#hugo-the-blazing-fast-site-generator">Hugo - the blazing fast site generator</a></li>
<li><a href="#bootswatch-theme">Bootswatch Theme</a></li>
<li><a href="#shortcodes">Shortcodes</a></li>
<li><a href="#other-caveats-and-fixes">Other Caveats and Fixes</a>
<ul>
<li><a href="#home-page-with-content-and-post-lists">Home Page with Content and Post Lists</a></li>
<li><a href="#tipue-search">tipue Search</a></li>
<li><a href="#code-highlighting">Code Highlighting</a></li>
<li><a href="#jupyter-notebooks-as-posts">jupyter Notebooks as Posts</a></li>
<li><a href="#latex-math-equations">Latex Math Equations</a></li>
</ul></li>
</ul>
</nav>

<h1 id="hugo-the-blazing-fast-site-generator">Hugo - the blazing fast site generator</h1>

<p><a href="https://gohugo.io">Hugo</a> is a light weight, fast and modern static website engine written in <a href="https://golang.org">go</a>. It literally takes just milliseconds to build your entire site. For the given lightness, it is highly flexible as well. You can organize your content however you want with any URL structure, group your content using your own indexes and categories and define your own <em>metadata</em> in any format: <code>YAML</code>, <code>TOML</code> or <code>JSON</code>. I was impressed! Keep in my mind, <code>python</code> is still my primary language of programming for scripting and machine learning. And, I have almost no  programming experience with <code>go</code>.</p>

<p>I chose <code>YAML</code> for all the configuration as well as <em>metadata</em>. In my next step to make this move, I had to choose the theme for my blog. If you have been following me, I have been using several flavors
of <a href="https://bootswatch.com">Bootswatch</a> themes. So my first goal was implement my heavily modified version of <a href="https://bootswatch.com">bootswatch</a> theme in Hugo.</p>

<h1 id="bootswatch-theme">Bootswatch Theme</h1>

<p>Developing a theme from scratch (<em>Well, the implementation from scratch, as I all I am trying to do is mimic/improvise my current theme from Nikola</em>) turned out to be a great adventure and learning exercise. It helped me understand the Hugo architecture in great detail. It did help to have some good <a href="https://gohugo.io/overview/introduction/">documentation</a> written for developers, not users! Although, Hugo&rsquo;s documentation can surely help itself with some cleaning and some fresher looks!</p>

<p>Hugo uses <a href="https://golang.org/pkg/text/template/">go templates</a> with many extra functions and set of variables provided by Hugo. I personally feel Hugo&rsquo;s template-ing system to be more flexible and easier than <a href="http://www.makotemplates.org">Mako</a> - the one used by default by Nikola.</p>

<p>I converted almost all of Mako theme from Nikola website to Hugo&rsquo;s format and architecture with additions (copied features and code) from a nice theme called <a href="https://themes.gohugo.io/hugo-tranquilpeak-theme/">TranqilPeak</a>. In particular, I liked their fonts, search feature for taxonomies pages. Copying these features also meant I had to learn a bit of <code>javascript</code> and <code>css</code>. You can find a working copy of my theme in the <code>src</code> branch of <a href="https://github.com/sadanand-singh/sadanand-singh.github.io">gihub repository</a> of my blog. I plan to release this theme as a standalone theme in near future though.</p>

<h1 id="shortcodes">Shortcodes</h1>

<p>Given I am using a <a href="http://getbootstrap.com">bootstrap</a> based theme, I like having a lot of its features available to me when I am writing in Markdown. The powerful template based <a href="https://gohugo.io/extras/shortcodes/">shortcodes in Hugo</a> provide a great way to write custom HTML code inside markdown. I feel Hugo shortcodes are so powerful, you could develop your own grammar of markup language in it! 😋</p>

<p>Some of my shortcodes are basically based on <a href="http://getbootstrap.com">bootstrap</a> classes like
panel, label, emphasis, highlighted text, and block quotes. I also liked the figure command provided by restructured text in Nikola. Luckily, same features are available in Hugo using a default shortcode called <code>figure</code>. Hugo also provides several other useful default shortcodes like <code>youtube</code>, <code>ref/relref</code> for referencing other posts etc.</p>

<p>I have also some additional shortcodes for code-blocks and math. I will be detailing about them in a bit more detail in the next section. All of my shortcodes are available with the theme in the same <a href="https://github.com/sadanand-singh/sadanand-singh.github.io">github repo</a>.</p>

<h1 id="other-caveats-and-fixes">Other Caveats and Fixes</h1>

<p>While converting to Hugo was fun, there were some caveats. The issues I faced were mainly with home page, site search, and <code>ipython</code> notebook posts.</p>

<h2 id="home-page-with-content-and-post-lists">Home Page with Content and Post Lists</h2>

<p>Getting home page to work was very simple. Hugo documentation page provides a very clear details about order in which various templates are looked. For home page, you will need to provide a template for <code>index.html</code>. Then Inside the <code>content</code> folder, you can put the <em>metadata</em> and the <em>content</em> for the home page in a file named <code>_index.md</code>.</p>

<p>I also added following template code in the index.html template to get list of posts with machine learning related tags:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go HTML template" data-lang="go HTML template"><span style="color:#75715e">{{</span> <span style="color:#a6e22e">$.Scratch.Add</span> <span style="color:#e6db74">&#34;mlposts&#34;</span> <span style="color:#a6e22e">slice</span> <span style="color:#75715e">}}</span>
<span style="color:#75715e">{{</span> <span style="color:#a6e22e">$tags</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">(</span><span style="color:#a6e22e">slice</span> <span style="color:#e6db74">&#34;Machine Learning&#34;</span> <span style="color:#e6db74">&#34;EDA&#34;</span> <span style="color:#e6db74">&#34;Kaggle&#34;</span> <span style="color:#e6db74">&#34;ML&#34;</span> <span style="color:#e6db74">&#34;Deep Learning&#34;</span> <span style="color:#e6db74">&#34;DL&#34;</span> <span style="color:#e6db74">&#34;Data Science&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">}}</span>
<span style="color:#75715e">{{</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">.Site.RegularPages</span> <span style="color:#75715e">}}</span>
    <span style="color:#75715e">{{</span> <span style="color:#a6e22e">$page</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">.</span> <span style="color:#75715e">}}</span>
    <span style="color:#75715e">{{</span> <span style="color:#a6e22e">$has_common_tags</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">intersect</span> <span style="color:#a6e22e">$tags</span> <span style="color:#a6e22e">.Params.tags</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">len</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">lt</span> <span style="color:#a6e22e">0</span> <span style="color:#75715e">}}</span>
    <span style="color:#75715e">{{</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">$has_common_tags</span> <span style="color:#75715e">}}</span>
        <span style="color:#75715e">{{</span> <span style="color:#a6e22e">$.Scratch.Add</span> <span style="color:#e6db74">&#34;mlposts&#34;</span> <span style="color:#a6e22e">$page</span> <span style="color:#75715e">}}</span>
    <span style="color:#75715e">{{</span> <span style="color:#66d9ef">end</span> <span style="color:#75715e">}}</span>
<span style="color:#75715e">{{</span> <span style="color:#66d9ef">end</span> <span style="color:#75715e">}}</span>
<span style="color:#75715e">{{</span> <span style="color:#a6e22e">$cand</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">.Scratch.Get</span> <span style="color:#e6db74">&#34;mlposts&#34;</span> <span style="color:#75715e">}}</span>
<span style="color:#75715e">{{</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">first</span> <span style="color:#a6e22e">10</span> <span style="color:#a6e22e">$cand</span> <span style="color:#75715e">}}</span>
    <span style="color:#75715e">{{</span> <span style="color:#a6e22e">.Render</span> <span style="color:#e6db74">&#34;li&#34;</span><span style="color:#75715e">}}</span>
<span style="color:#75715e">{{</span> <span style="color:#66d9ef">end</span> <span style="color:#75715e">}}</span></code></pre></div>

<h2 id="tipue-search">tipue Search</h2>

<p>Hugo has support for several output formats, including HTML and JSON. For implementing <a href="http://www.tipue.com/search/">tipue search</a>, we need to generate a JSON file with site content. This can be done by adding following to the configuration file:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-YAML" data-lang="YAML"><span style="color:#75715e"># Output formats</span>
outputs:
  home: [ <span style="color:#e6db74">&#34;HTML&#34;</span>, <span style="color:#e6db74">&#34;JSON&#34;</span>]
  page: [ <span style="color:#e6db74">&#34;HTML&#34;</span>]</code></pre></div>

<p>and, using the following <code>index.json</code> template:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go HTML template" data-lang="go HTML template"><span style="color:#75715e">{{-</span> <span style="color:#a6e22e">$.Scratch.Add</span> <span style="color:#e6db74">&#34;index&#34;</span> <span style="color:#a6e22e">slice</span> <span style="color:#75715e">-}}</span>
<span style="color:#75715e">{{-</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">where</span> <span style="color:#a6e22e">.Site.RegularPages</span> <span style="color:#e6db74">&#34;Type&#34;</span> <span style="color:#e6db74">&#34;not in&#34;</span>  <span style="color:#f92672">(</span><span style="color:#a6e22e">slice</span> <span style="color:#e6db74">&#34;page&#34;</span> <span style="color:#e6db74">&#34;json&#34;</span> <span style="color:#e6db74">&#34;nosearch&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">-}}</span>
<span style="color:#75715e">{{-</span> <span style="color:#a6e22e">$.Scratch.Add</span> <span style="color:#e6db74">&#34;index&#34;</span> <span style="color:#f92672">(</span><span style="color:#a6e22e">dict</span> <span style="color:#e6db74">&#34;url&#34;</span> <span style="color:#a6e22e">.Permalink</span> <span style="color:#e6db74">&#34;title&#34;</span> <span style="color:#a6e22e">.Title</span> <span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">.Plain</span> <span style="color:#e6db74">&#34;tags&#34;</span> <span style="color:#f92672">(</span><span style="color:#a6e22e">delimit</span> <span style="color:#a6e22e">.Params.tags</span> <span style="color:#e6db74">&#34;, &#34;</span><span style="color:#f92672">))</span> <span style="color:#75715e">-}}</span>
<span style="color:#75715e">{{-</span> <span style="color:#66d9ef">end</span> <span style="color:#75715e">-}}</span>
{&#34;pages&#34;: <span style="color:#75715e">{{-</span> <span style="color:#a6e22e">$.Scratch.Get</span> <span style="color:#e6db74">&#34;index&#34;</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">jsonify</span> <span style="color:#75715e">-}}</span>}</code></pre></div>

<p>Now, include the following <code>css</code> in the <code>&lt;head&gt;</code> of your pages:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-HTML" data-lang="HTML">&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch.css&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/css&#34;</span>&gt;</code></pre></div>

<p>The following <code>modal</code> code is needed to display the search results,
preferably at the end of the <strong>body</strong> of the HTMLpage:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-HTML" data-lang="HTML">&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;search-resuts&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal fade&#34;</span> <span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dialog&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;height: 80%;&#34;</span>&gt;
&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-dialog&#34;</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-content&#34;</span>&gt;
      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-header&#34;</span>&gt;
        &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;close&#34;</span> <span style="color:#a6e22e">data-dismiss</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal&#34;</span>&gt;×&lt;/<span style="color:#f92672">button</span>&gt;
        &lt;<span style="color:#f92672">h4</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-title&#34;</span>&gt;Search Results:&lt;/<span style="color:#f92672">h4</span>&gt;
      &lt;/<span style="color:#f92672">div</span>&gt;
      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-body&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tipue_search_content&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;max-height: 600px; overflow-y: auto;&#34;</span>&gt;
      &lt;/<span style="color:#f92672">div</span>&gt;
      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-footer&#34;</span>&gt;
        &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-default&#34;</span> <span style="color:#a6e22e">data-dismiss</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal&#34;</span>&gt;Close&lt;/<span style="color:#f92672">button</span>&gt;
      &lt;/<span style="color:#f92672">div</span>&gt;
    &lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">div</span>&gt;</code></pre></div>

<p>Finally, the following <code>javascript</code> in the lower end of the <strong>body</strong> of HTML pages:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-HTML" data-lang="HTML">&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#a6e22e">$</span>(document).<span style="color:#a6e22e">ready</span>(<span style="color:#66d9ef">function</span>() {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">url1</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch_set.js&#34;</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">url2</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch.min.js&#34;</span>;
    <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">when</span>(
        <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">getScript</span>( <span style="color:#a6e22e">url1</span> ),
        <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">getScript</span>( <span style="color:#a6e22e">url2</span> ),
        <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">Deferred</span>(<span style="color:#66d9ef">function</span>( <span style="color:#a6e22e">deferred</span> ){
            <span style="color:#a6e22e">$</span>( <span style="color:#a6e22e">deferred</span>.<span style="color:#a6e22e">resolve</span> );
        })
    ).<span style="color:#a6e22e">done</span>(<span style="color:#66d9ef">function</span>() {
        <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;#tipue_search_input&#39;</span>).<span style="color:#a6e22e">tipuesearch</span>({
            <span style="color:#e6db74">&#39;mode&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;json&#39;</span>,
            <span style="color:#e6db74">&#39;contentLocation&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/index.json&#39;</span>
        });
        <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;#tipue_search_input&#39;</span>).<span style="color:#a6e22e">keyup</span>(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">e</span>) {
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">keyCode</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">13</span>) {
                <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;#search-results&#39;</span>).<span style="color:#a6e22e">modal</span>()
            }
        });
    });
});
&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>

<p>And, of course you will need a form/input for performing the search:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-HTML" data-lang="HTML">&lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbar-form navbar-right&#34;</span>&gt;
    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tipue_search_input&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Search&#34;</span>&gt;
&lt;/<span style="color:#f92672">span</span>&gt;</code></pre></div>

<h2 id="code-highlighting">Code Highlighting</h2>

<p>Although, by default Hugo provides code highlighting using the <a href="http://pygments.org">pygments</a>, I prefer to use client-side highlighting using <a href="http://prismjs.com">prism.js</a>. I also use the following <a href="http://prismjs.com/#plugins">plugins</a> of <code>prism.js</code> for line numbers, highlighting and cleanup of white space:</p>

<ul>
<li><a href="http://prismjs.com/plugins/line-highlight/">Line Highlight</a></li>
<li><a href="http://prismjs.com/plugins/line-numbers/">Line Numbers</a></li>
<li><a href="http://prismjs.com/plugins/normalize-whitespace/">Normalize Whitespace</a></li>
</ul>

<p>Finally, I create a shortcode called <em>code-block</em> to add relevant classes and variables around <code>&lt;code&gt;</code> and <code>&lt;pre&gt;</code> tags so that prism could highlight code correctly.</p>

<h2 id="jupyter-notebooks-as-posts">jupyter Notebooks as Posts</h2>

<p>One of the advantages of  using Nikola is that, it provides native support for writing Blog posts in <code>jupyter</code> notebooks.</p>

<p>But, on some Google search, I found this neat <a href="https://sharmamohit.com/post/jupyter-notebooks-in-blog/">solution</a>.</p>

<p>In summary, the setup is very simple - Use the linked <a href="http://sharmamohit.com/css/jupyter.css">jupyter.css</a> file in your template, then
add this <code>css</code> file to relevant pages. I do the this based on a
<em>metadata</em> variable <code>notebook: true</code> via the following template code:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go HTML Template" data-lang="Go HTML Template"><span style="color:#75715e">{{</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">.Params.notebook</span> <span style="color:#75715e">}}</span>
    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#75715e">{{</span> <span style="color:#a6e22e">$.Site.BaseURL</span> <span style="color:#75715e">}}</span><span style="color:#e6db74">css/jupyter.css&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/css&#34;</span>&gt;
<span style="color:#75715e">{{</span> <span style="color:#66d9ef">end</span> <span style="color:#75715e">}}</span></code></pre></div>

<p>Then for any jupyter notebook, convert it to basic HTML using the following command:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">jupyter nbconvert --to html --template basic *source_file.ipynb*</code></pre></div>

<p>Finally, create a markdown file for your post to put the contents of this HTML file. Works like charm since markdown supports including raw HTML code!</p>

<h2 id="latex-math-equations">Latex Math Equations</h2>

<p>I used <a href="https://github.com/Khan/KaTeX">katex</a> for using math in markdown. I was having some issue with the multi-line display math equations, so I created a shortcode called <em>tex</em> to write HTML code explicitly so that <code>katex</code> could handle that easily.</p>

<p>I added following code in the <code>&lt;head&gt;</code> of all of posts:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go HTML Template" data-lang="Go HTML Template"><span style="color:#75715e">{{</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">.Params.hasMath</span> <span style="color:#75715e">}}</span>
    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css&#34;</span>
    <span style="color:#a6e22e">integrity</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0&#34;</span>
    <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>&gt;
<span style="color:#75715e">{{</span> <span style="color:#66d9ef">end</span> <span style="color:#75715e">}}</span></code></pre></div>

<p>And the following script at the end of the <code>&lt;body&gt;</code> section:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go HTML Template" data-lang="Go HTML Template"><span style="color:#75715e">{{</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">.Params.hasMath</span> <span style="color:#75715e">}}</span>
    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js&#34;</span>
    <span style="color:#a6e22e">integrity</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1&#34;</span> 
    <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js&#34;</span>
    <span style="color:#a6e22e">integrity</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sha256-ExtbCSBuYA7kq1Pz362ibde9nnsHYPt6JxuxYeZbU+c=&#34;</span> 
    <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
    &lt;<span style="color:#f92672">script</span>&gt;
        <span style="color:#a6e22e">renderMathInElement</span>(document.<span style="color:#a6e22e">body</span>,
            {
                <span style="color:#a6e22e">delimiters</span><span style="color:#f92672">:</span> [
                    {<span style="color:#a6e22e">left</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;\\\\begin{equation*}&#34;</span>, <span style="color:#a6e22e">right</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;\\\\end{equation*}&#34;</span>, <span style="color:#a6e22e">display</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>},
                    {<span style="color:#a6e22e">left</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;$$&#34;</span>, <span style="color:#a6e22e">right</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;$$&#34;</span>, <span style="color:#a6e22e">display</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>},
                    {<span style="color:#a6e22e">left</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;\\\[&#34;</span>, <span style="color:#a6e22e">right</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;\\\]&#34;</span>, <span style="color:#a6e22e">display</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>},
                    {<span style="color:#a6e22e">left</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;$&#34;</span>, <span style="color:#a6e22e">right</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;$&#34;</span>, <span style="color:#a6e22e">display</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>},
                    {<span style="color:#a6e22e">left</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;\\\(&#34;</span>, <span style="color:#a6e22e">right</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;\\\)&#34;</span>, <span style="color:#a6e22e">display</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>}
                ]
            }
        );
    &lt;/<span style="color:#f92672">script</span>&gt;
<span style="color:#75715e">{{</span> <span style="color:#66d9ef">end</span> <span style="color:#75715e">}}</span></code></pre></div>

<p>Now, whenever, I need to add math equations in a post, enable the <code>hasMath: true</code> parameter in its <em>metadata</em>.</p>

<p>So there you have it. I have my Blog now up and running with Hugo. Hope I will be more active here, since it now takes only seconds to deploy once I have a post written. No excuses now! 😜</p>
    </div>
    <div id="post-footer" class="post-footer">
        
            
                
                
                  <div class="post-footer-tags">
                    <hr><br/>
                    <strong><span class="text-color-light text-small">TAGGED IN:</span></strong>
                    
  <a class="text-white badge badge-pill badge-dark" href="https://sadanand-singh.github.io//tags/blog/">Blog</a>

  <a class="text-white badge badge-pill badge-dark" href="https://sadanand-singh.github.io//tags/hugo/">Hugo</a>

  <a class="text-white badge badge-pill badge-dark" href="https://sadanand-singh.github.io//tags/golang/">golang</a>


                  </div>
                
            
        
        <br/>
        <ul class="mx-0 px-0 pager">
  
    
        <li class="previous btn btn-lg btn-primary">
            <a href="/posts/descriptivestats/" rel="prev" title="Descriptive Statistics">
            <i class="fa fa-angle-left text-base text-white icon-mr"></i>
            <span class="text-white"> Previous post </span>
            </a>
        </li>
    
    
        <li class="next mr-0 float-right btn btn-lg btn-primary">
            <a href="/posts/svmpython/" rel="next" title="Understanding Support Vector Machine via Examples">
            <span class="text-white"> Next post </span>
            <i class="fa fa-angle-right text-base text-white icon-ml"></i>
            </a>
        </li>
    
  
</ul>
        <hr>
    </div>

    
        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    this.page.identifier = 'nikola2hugo.sadanand';
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "sadanandsblog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

    
</article>

        </div>
        
        <footer id="footer">
  <span class="copyrights">
    
    Contents &copy; 2018         <a href="mailto:sadanand.singh@aol.com">Sadanand Singh</a> - Powered by         <a href="https://gohugo.io/" rel="nofollow">Hugo 0.39</a> <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
    
  </span>
</footer>

    </div>
</div>
    
    
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery.colorbox/1.6.4/jquery.colorbox-min.js"></script>
<script src="https://sadanand-singh.github.io/js/peak.min.js"></script>

    <script async type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53f6d74a591ace8f"></script>


<script>var disqus_shortname="sadanandsblog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>

<script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>


<div id="search-results" class="modal" role="dialog" style="height: 80%;">
    <div class="modal-dialog" role="document">
        
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Search Results:</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">X</span>
            </button>
          </div>
          <div class="modal-body" id="tipue_search_content" style="max-height: 600px; overflow-y: auto;">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
          </div>
        </div>
    </div>
</div>

<script>
$(document).ready(function() {
    var url1 = "https://cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch_set.js";
    var url2 = "https://cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch.min.js";
    $.when(
        $.getScript( url1 ),
        $.getScript( url2 ),
        $.Deferred(function( deferred ){
            $( deferred.resolve );
        })
    ).done(function() {
        $('#tipue_search_input').tipuesearch({
            'mode': 'json',
            'contentLocation': '/index.json'
        });
        $('#tipue_search_input').keyup(function (e) {
            if (e.keyCode == 13) {
                $('#search-results').modal()
            }
        });
    });
});
</script>





  
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-54080172-1', 'auto');
ga('send', 'pageview');
</script>



    
  </body>
</html>

