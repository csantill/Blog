{{ $.Scratch.Set "isPost" false }}
{{ if .IsPage }}
  {{ if eq .Type "post" }}
    {{ $.Scratch.Set "isPost" true }}
  {{ end }}
{{ end }}

<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
  <head>
    {{ partial "head_start.html" . }}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo {{ .Hugo.Version }}">
    <meta name="theme" content="Bootstrap3-Lumen">
    {{ if eq .Title .Site.Title }}
      <title>{{ .Title }}</title>
    {{ else }}
      <title>{{ .Title }} | {{ .Site.Title }}</title>
    {{ end }}
    <meta name="author" content="{{ .Site.Author.name }}">
    <meta name="keywords" content="{{ with .Keywords }}{{ delimit . ", " }}{{ end }}{{ if .Site.Params.keywords }}, {{ delimit .Site.Params.keywords ", " }}{{ end }}">

    {{ range .Site.Params.favicons }}
        <link rel="icon" href="{{ $.Site.BaseURL }}{{ .Icon }}" sizes="{{ .Size }}">
    {{ end }}

    <!-- open graph data -->
    <meta name="description" content="{{ if .Description }}{{ .Description }}{{ else if .IsPage }}{{ .Summary }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <meta property="og:description" content="{{ if .Description }}{{ .Description }}{{ else if .IsPage }}{{ .Summary }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="{{ with .Title }}{{ . }}{{ else }}{{ .Site.Title }}{{ end }}">
    <meta property="og:url" content="{{ .URL }}">
    <meta property="og:site_name" content="{{ .Site.Title }}">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{{ .Site.Title }}">
    <meta name="twitter:description" content="{{ if .Description }}{{ .Description }}{{ else if .IsPage }}{{ .Summary }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    {{ with .Site.Author.twitter }}
      <meta name="twitter:creator" content="@{{ . }}">
    {{ end }}
    {{ with .Site.Params.fbAppId }}
      <meta property="fb:app_id" content="{{ . }}">
    {{ end }}

    {{ if .Site.Author.picture }}
      <meta property="og:image" content="{{ .Site.Author.picture | absURL }}">
    {{ end }}

    {{ with .Site.Author.googlePlus }}
      <link rel="publisher" href="https://plus.google.com/{{ . | urlize }}">
    {{ end }}

    <link href="//stackpath.bootstrapcdn.com/bootswatch/4.1.0/{{ .Site.Params.bootswatch }}/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
   <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" />
    <link href="{{ $.Site.BaseURL }}css/rst.css" rel="stylesheet" type="text/css">
    <link href="{{ $.Site.BaseURL }}css/theme.css" rel="stylesheet" type="text/css">
    <link href="{{ $.Site.BaseURL }}css/peak.min.css" rel="stylesheet" type="text/css">
    <link href="{{ $.Site.BaseURL }}css/prism.min.css" rel="stylesheet" type="text/css">
    <link href="{{ $.Site.BaseURL }}css/colorbox.css" rel="stylesheet" type="text/css">
    <link href="{{ $.Site.BaseURL }}css/custom.min.css" rel="stylesheet" type="text/css">
    <link href="{{ $.Site.BaseURL }}css/tags.min.css" rel="stylesheet" type="text/css">
    <link href="//cdnjs.cloudflare.com/ajax/libs/Tipue-Search/5.0.0/tipuesearch.css" rel="stylesheet" type="text/css">

    {{ range .Site.Params.CustomCSS }}
      <link rel="stylesheet" href="{{ $.Site.BaseURL }}{{ . }}">
    {{ end }}

    {{ if .Params.hasMath }}
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.css" integrity="sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei" crossorigin="anonymous">

    {{ end }}
    {{ if .Params.notebook }}
    <link href="{{ $.Site.BaseURL }}css/jupyter.css" rel="stylesheet" type="text/css">
    {{ end }}
    {{ partial "head_end.html" . }}
  </head>
