<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
    {{ partial "post/header.html" . }}
    <div class="e-content entry-content" itemprop="articleBody text">
        {{ (replaceRE "<!--\\s*[t|T][o|O][c|C]\\s*-->" (printf "<strong id=\"table-of-contents\">%s</strong>%s" (i18n "post.toc") .TableOfContents) .Content) | safeHTML }}
    </div>
    <div id="post-footer" class="post-footer">
        {{ if (not (eq .Params.showTags false)) }}
            {{ with .Params.tags }}
                {{ $tagsLength := len . }}
                {{ if gt $tagsLength 0 }}
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">{{ i18n "post.tagged_in" }}</span><br/>
                    {{ partial "post/tag.html" $ }}
                  </div>
                {{ end }}
            {{ end }}
        {{ end }}
    </div>
    <aside class="postpromonav">
    <nav>
    {{ partial "post/pager.html" . }}
    </nav>
    </aside>

    {{ $link := absURL .Permalink }}
    {{ $title := .Title }}
    {{ $id := .Params.disqus_identifier }}
    {{ if not (eq .Params.comments false) }}
        {{ with .Site.DisqusShortname }}
            <div id="disqus_thread"></div>
                <script>
                var disqus_shortname ={{ . }},
                    disqus_url={{ $link }},
                disqus_title={{ $title }},
                disqus_identifier={{ $id }},
                disqus_config = function () {
                    this.language = "en";
                };
                (function() {
                    var dsq = document.createElement('script'); dsq.async = true;
                    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
            </noscript>
            <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
        {{ end }}
    {{ end }}

    {{ if .Params.hasMath }}
        {{ partial "post/math.html" . }}
    {{ end }}
</article>
