(function(){flowr=function(d,k){function r(a,c){var g=0,b=a.length,d=[],e=0;for(requiredPadding=function(){return(d.length-1+(1==arguments.length?arguments[0]:0))*c.padding};e+requiredPadding()<c.maxWidth&&g<b;){var f=a[g],l=c.itemWidth.call($this,f),k=c.itemHeight.call($this,f),h=c.height,l=Math.floor(l*c.height/k);l>c.maxWidth&&(l=c.maxWidth-1-requiredPadding(1),h=c.height*h/l);if(e+l<c.maxWidth)d.push({height:h,width:l,itemData:f}),e+=l,g++;else break}testWidth=0;if(e<c.maxWidth)for(a=(c.maxWidth-
requiredPadding()-10)/e,a>c.maxScale&&(a=1),g=Math.round(c.height*a),i=0;i<d.length;i++)b=d[i],b.width=Math.floor(b.width*a),b.height=g,testWidth+=b.width;return{data:d,width:testWidth+requiredPadding()}}$this=d;var n=function(a){a=a||{};for(var c=1;c<arguments.length;c++)if(arguments[c])for(var b in arguments[c])arguments[c].hasOwnProperty(b)&&(a[b]=arguments[c][b]);return a},b=function(){var a=0,c={};return{set:function(b,d){if(void 0===b.myCustomDataTag){var g=a++;b.myCustomDataTag=g}else g=b.myCustomDataTag;
c[g]=n(c[g],d)},get:function(a){return c[a.myCustomDataTag]||{}}}}();d=["complete","data","responsive"];var f={data:[],padding:5,height:240,render:null,append:!1,widthAttr:"width",heightAttr:"height",maxScale:1.5,maxWidth:$this.offsetWidth-1,itemWidth:null,itemHeight:null,complete:null,rowClassName:"flowr-row",rows:-1,responsive:!0},a=n(f,k);if(a.append&&b.get($this).lastSettings){lastSettings=b.get($this).lastSettings;for(attr in f)0>d.indexOf(attr)&&a[attr]==f[attr]&&(a[attr]=lastSettings[attr]);
lastRow=b.get($this).lastRow;0<lastRow.data.length&&25<a.maxWidth-lastRow.width&&(lastRowData=lastSettings.data.slice(lastSettings.data.length-lastRow.data.length-1),a.data=lastRowData.concat(a.data),$("."+a.rowClassName+":last",$this).detach())}a.responsive||a.append||$this.width($this.width());if(a.data instanceof Array){"number"!=typeof a.padding&&(a.padding=parseInt(a.padding));"function"!=typeof a.itemWidth&&(a.itemWidth=function(b){return b[a.widthAttr]});"function"!=typeof a.itemHeight&&(a.itemHeight=
function(b){return b[a.heightAttr]});a.responsive&&!b.get($this).__responsive&&(window.addEventListener("resize",function(){initialWidth=b.get($this).width;newWidth=$this.offsetWidth;if(initialWidth!=newWidth){var a=b.get($this).task_id;a&&(a=clearTimeout(a),a=null);a=setTimeout(function(){if(b.get($this).width!=$this.offsetWidth){$this.innerHTML="";var a=b.get($this).lastSettings||{};a.data=b.get($this).data||{};a.maxWidth=$this.offsetWidth-1;flowr($this,a)}},80);b.set($this,{task_id:a})}}),b.set($this,
{__responsive:!0}));k=a.data.slice(0);d=null;var p=f=0,e=[];for(i=0;i<k.length;i++)e.push(k[i]);for(b.set($this,{data:e});null!=(d=r(k,a))&&0<d.data.length&&!(0<a.rows&&f>=a.rows);){k.splice(0,d.data.length);e=document.createElement("DIV");e.classList?e.classList.add(a.rowClassName):e.className+=" "+a.rowClassName;var q=$this.clientWidth-d.width-2*a.padding;for(i=0;i<d.data.length;i++){var m=d.data[i],h=a.render.call($this,m);extraw=Math.floor(q/d.data.length);0==i&&(extraw+=q%d.data.length);h.style.width=
m.width+extraw;h.style.height=m.height;h.style.marginBottom=a.padding+"px";h.style.marginLeft=0==i?"0":a.padding+"px";e.append(h);p++}$this.append(e);f++;b.set($this,{lastRow:d})}b.set($this,{lastSettings:a});"function"==typeof a.complete&&a.complete.call($this,{renderedRows:f,renderedItems:p})}}})();
